swagger: '2.0'
info:
  version: 1.10.1
  title: Reflek APIs
  description: Express Microservice Starter
basePath: 
tags:
  - name: Login
    description: Security Login for JWT Generation
consumes:
  - application/json
produces:
  - application/json
schemes:
  - http
  - https
securityDefinitions:
  Bearer:
    description: |
      For accessing the API a valid JWT token must be passed in all the queries in
      the 'Authorization' header.


      A valid JWT token is generated by the API and retourned as answer of a call
      to the route /login giving a valid user & password.


      The following syntax must be used in the 'Authorization' header :

          Bearer xxxxxx.yyyyyyy.zzzzzz
    type: apiKey
    name: Authorization
    in: header
definitions:          
  LoginBody:
    type: object
    title: Update Plug
    required:
      - plug1
      - plug2
    properties:
      plug1:
        type: string
        description: Plug 1
      plug2:
        type: string
        description: Plug 2
  Token:
    type: object
    properties:
      idToken:
        type: string
      expiresIn:
        type: string
parameters:
  carRegistration:
    name: carRegistration
    in: path
    description: Car registration number
    required: true
    type: string

paths:
  /updatePlug:
    post:
      tags:
        - Update Plug
      description: |
        Update the Plug
      responses:
        '200':
          description: Returns updated json
          schema:
            $ref: '#/definitions/Token'
        '401':
          description: Unauthorized user
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: body
          in: body
          description: used credentials
          required: true
          schema:
            $ref: '#/definitions/LoginBody'